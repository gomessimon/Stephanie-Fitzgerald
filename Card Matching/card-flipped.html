<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>My Feelings - Card Game</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="wrap" class="matching-game">
      <div class="container main">
        <div class="row">
        <div class="col-md-12 main-container">
          <!-- <div class="col-sm-3 hidden-md hidden-lg hidden-xs"></div> -->
          <section class="block desty">
            <div class="inner">
              <h2>Desty</h2>
              <img src="image/desty-image.png" alt="" class="desty-image">

              <div class="push-down"></div>

              <div class="text-center go-back">
                <a href="/"><img src="image/action-map.png" alt=""></a>
              </div>

            </div>
          </section><!-- /.desty -->
          <section class="block my-feeling">
            <div class="inner">
              <h2>My Feelings - Cards</h2>
              <div class="row">

                <div class="col-md-4">
                  <div class="avatar-container">
                    <div class="avatar-main">
                      <img src="image/avatar-moods/happy.png" alt="" class="mood happy" >
                      <img src="image/avatar-moods/sad.png" alt="" class="mood sad" style="display: none;">
                      <img src="image/avatar-moods/scared.png" alt="" class="mood scared" style="display: none;">
                      <img src="image/avatar-moods/angry.png" alt="" class="mood angry" style="display: none;">
                      <img src="image/avatar-moods/disgust.png" alt="" class="mood disgust" style="display: none;">
                      <img src="image/avatar-moods/surprise.png" alt="" class="mood surprise" style="display: none;">
                    </div><!-- .avatar-main -->
                  </div><!-- /.avatar-container -->
                </div>

                <div class="col-md-7">
                  <div class="matching-cards">
                    <ul class="list-unstyled list-inline row">
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="0" card-value="1">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/HAPPY.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="1" card-value="2">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/ANGRY.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="2" card-value="3">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/DISGUST.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="3" card-value="4">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/SAD.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="4" card-value="5">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/SCARED.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="5" card-value="6">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/SURPRISE.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="0" card-value="7">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/HAPPY.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="1"  card-value="8">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/ANGRY.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="2" card-value="9">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/DISGUST.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="3" card-value="10">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/SAD.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="4" card-value="11">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back"><div class="card-inner">
                            <img src="image/avatar-heads/SCARED.png" alt="" class="head">
                          </div></div>
                        </div>
                      </li>
                      <li class="col-md-3 col-sm-3 col-xs-3">
                        <div class="card" card-id="5" card-value="12">
                          <div class="front"><div class="card-inner">
                            <div class="star"><img src="image/Star.png"></div>
                          </div></div>
                          <div class="back">
                            <div class="card-inner">
                              <img src="image/avatar-heads/SURPRISE.png" alt="" class="head">
                            </div>
                          </div>
                        </div>
                      </li>
                    </ul>
                    <div class="row">
                      <div class="col-md-12 text-center">
                        <a href="#" class="reset"><img src="image/playagainbutton.png"></a>
                      </div>
                    </div>
                  </div><!-- /.matching-cards -->
                </div>
              </div>
            </div>
          </section><!-- /.my-feeling-block -->
          </div><!-- /.main-container -->
        </div>
      </div><!-- /.main -->
    </div><!-- /#wrap -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="js/bootstrap.min.js"></script> -->
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdn.rawgit.com/nnattawat/flip/v1.0.16/dist/jquery.flip.min.js"></script>
    <script>
      $(document).ready(function() {
        var flag = 0;
        var clickCount = 0;
        var cardValue = null;
        var prevCard = null;
        var currentCard = null;

        //$('.reset').on( 'click', function(){ location.reload(); });
        $('.reset').on( 'click', function(event){
          event.preventDefault();
          if( $('.done').length > 11 )
            location.reload();
          
        });
        $(".card").flip();
        $('.card').on( 'click', startGame );

       

        function startGame() {
        clickCount++;
        if( clickCount > 2 ) { $(this).flip(false); }
        else {     
          $(this).flip(true);
          if( !flag ) {
              prevCard = $(this).attr('card-id');
              cardValue = $(this).attr('card-value');             
              flag++; // = true;
            } else {
              if( $(this).attr('card-value') != cardValue) {
                currentCard = $(this).attr('card-id');
                matchCard(prevCard, currentCard);
                flag++;
              }
              
            }
            //console.log(prevCard +" "+currentCard);
            //console.log(cardValue);
            //clickCount = 0;
          }
        }

        function matchCard(cardOne, cardTwo) {
          if( cardTwo === cardOne ) {
            setTimeout( function() {
                $('[card-id="' + cardTwo + '"]').flip(false);
                $('[card-id="' + cardTwo + '"]').off('click');
                $('[card-id="' + cardTwo + '"] .star').show(100);
                $('[card-id="' + cardTwo + '"]').addClass('done');
                flag = 0;
                clickCount = 0;
              }, 2500 );
          } else {
            setTimeout( function() { 
              $('[card-id="' + cardTwo + '"], [card-id="' + cardOne + '"]').flip(false);
              flag = 0;
              clickCount = 0;                                
            }, 2500 );
          }
        }
      });
    </script>
  </body>
</html>